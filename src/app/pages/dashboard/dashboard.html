@let isEditMode=editMode();
@let data=tabs();

<section class="section">
  @if(data.length){
  <app-tabs (onChange)="onTabChange($event)">
    @for(tab of data; track $index) {
    <app-tab [id]="tab.id">
      <ng-template #header>
        @if(isEditMode){
        <button (click)="moveTabLeft(tab.id)" [disabled]="!canMoveTabLeft(tab.id)" title="Move left">
          ←
        </button>
        }
        {{tab.title}}
        @if(isEditMode){
        <button (click)="renameTab(tab.id)" title="Edit title">
          <span class="font-icon">edit</span>
        </button>
        <button (click)="moveTabRight(tab.id)" [disabled]="!canMoveTabRight(tab.id)" title="Move right">
          →
        </button>
        <button (click)="removeTab(tab.id)" title="Delete tab">
          <span class="font-icon">delete</span>
        </button>
        }
      </ng-template>
      <ng-template #content>
        <div>
          <app-card-list [cards]="tab.cards" [tabId]="tab.id" />
        </div>
      </ng-template>
    </app-tab>
    }
  </app-tabs>
  }@else{
  <app-header title="Empty"></app-header>
  @for(line of empty; track $index){
  <p class="message">{{line}}</p>
  }
  <img class="bg_image" src="./assets/wi-fi-girl2.png" alt="bg_image" />
  }
  @if(isEditMode){
  <div class="controls_bot">
    <button type="button" class="button" (click)="onAddTab()">
      <span class="font-icon">add</span>
      Add tab
    </button>
    <button type="button" class="button" (click)="onAddCard()">
      <span class="font-icon">add</span>
      Add card
    </button>
    <button type="button" class="button" (click)="onDiscard()">
      <span class="font-icon">cancel</span>
      Discard
    </button>
    <button type="button" class="button" (click)="onSave()">
      <span class="font-icon">save</span>
      Save
    </button>
  </div>
  }@else{
  <div class="controls_top">
    <app-square-button icon="edit" (onClick)="onEdit()" />
    <app-square-button icon="del" (onClick)="onDelete()" />
  </div>
  }
</section>
