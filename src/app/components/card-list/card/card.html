@let isEditMode=editMode();
@let isTitleEditMode=editTitleMode();

<div class="card" [class.highlight]="highlight()">
  @if(card){

  <div class="title">
    @if(isTitleEditMode){
    <input type="text" name="title" [value]="card.title" placeholder="Card title" maxlength="50"
      (change)="onTitleChange($event)" (blur)="onTitleChange($event)" />
    }@else{
    <h3>{{card.title}}</h3>
    @if(isEditMode){
    <app-square-button icon="edit" (onClick)="handleTitleEdit()" />
    }
    }
  </div>

  @if(card.items.length){
  <div class="item_list" [class.item_list_vertical]="card.layout==='verticalLayout'">
    @for(item of card.items; track item.id){
    @if(item.type==='device'){
    <app-device [onSwitch]="onToggle" [data]="item" />
    }
    @if(item.type==='sensor'){
    <app-sensor [layout]="card.layout" [data]="item" />
    }
    }
    @if(groupToggle){
    <app-device [onSwitch]="onGroupToggle" [data]="groupToggle" />
    }
  </div>
  }@else{
  {{empty}}
  }

  }
</div>
